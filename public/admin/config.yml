local_backend: true
backend:
  name: github
  repo: garethfoote/rachelroller-cms
  branch: main
  # these three tell Decap to use your site’s OAuth endpoints
  base_url: https://rachelroller.netlify.app
  auth_endpoint: oauth
  site_domain: rachelroller.netlify.app

# public/admin/config.yml
media_folder: "public/uploads"    # where files are stored in the repo
public_folder: "/uploads"         # how those files are referenced in content

publish_mode: simple

collections:
  - label: "Pages"
    name: "pages"
    media_folder: "pages/" 
    files: 
      - label: "Homepage"
        name: "home"
        type: "file"
        file: "src/content/pages/home.md"
        fields:
          - { label: "Title", name: "title", widget: "string" }
          - label: "Anchor Links"
            name: "anchor_links"
            widget: "list"
            summary: "{{fields.title}} → {{fields.url}}"
            fields:
              - { label: "Link title", name: "title", widget: "string" }
              - { label: "URL", name: "url", widget: "string" }
          # Optional short intro if you want a separate teaser
          - { label: "Intro", name: "intro", widget: "text" }
  - label: "Projects"
    name: "projects"
    type: "folder"
    folder: "src/content/projects"
    create: true
    slug: "{{slug}}"
    path: "{{slug}}/index"   # writes index.md under a <slug> folder
    # Recommended: store each project’s media under /public/uploads/projects/<slug>
    media_folder: "/public/uploads/projects/{{slug}}"
    public_folder: "/uploads/projects/{{slug}}"
    
    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "body",  label: "Body",  widget: "markdown" }
      - { name: 'gallery', label: "Gallery", widget: 'image', choose_url: true, media_library: {config: {multiple: true, max_files: 999}}}
      - label: "Date"
        name: "date"
        widget: "datetime"
        default: "{{now}}"
        date_format: "YYYY-MM-DD" # e.g. 24.12.2021
        # format: "LLL"
        picker_utc: false
    
    sort: "date:desc"
    summary: "{{title}} — {{date | date('MMM D, YYYY')}}"
    thumbnail: "{{gallery}}"

